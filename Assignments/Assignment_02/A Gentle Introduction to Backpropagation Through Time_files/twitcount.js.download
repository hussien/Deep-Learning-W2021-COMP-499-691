!function(r,u){var l=function(t,s){this.doneClass="has-twitcounts",this.delay=1e3,this.countUrl="//counts.twitcount.com/counts.php?url=",this.url=t||r.location.href,this.title="Powered by TwitCount.com",this.request=function(t){var e=this.countUrl+this.url,n=new XMLHttpRequest;if(!n)return!1;n.onreadystatechange=function(){4==n.readyState&&200==n.status&&t(n.responseText)},n.open("GET",e,!0),n.send()},this.sumomePlugin=function(){var c=this,t=s.querySelectorAll(".sumome-share-client-share");[].forEach.call(t,function(l){var o=l.parentElement;if("twitter"==l.getAttribute("data-sumome-share")&&!l.classList.contains("sumome-share-client-count")&&!l.classList.contains(c.doneClass)){l.classList.add(c.doneClass);c.request(function(t){var e=JSON.parse(t).count;if(!isNaN(e)){var n=u.createElement("span"),s=u.createTextNode(e);n.title=c.title,n.appendChild(s),l.appendChild(n),l.classList.add("sumome-share-client-count");var a=o.querySelectorAll(".sumome-share-client-share-share span strong"),i=parseInt(e);[].forEach.call(a,function(t){if(t.childNodes.length){var e=c.extractNumber(t.childNodes[0].nodeValue);isNaN(e)||(i+=e)}});var r=o.querySelectorAll('.sumome-share-client-share-share[data-sumome-share="share"] span');[].forEach.call(r,function(t){var e=t.querySelectorAll("strong");if(e&&e.length)e[0].childNodes[0].nodeValue=c.formatNumber(i);else{var n=u.createElement("strong"),s=u.createElement("br"),a=u.createTextNode(c.formatNumber(i));n.appendChild(a),t.insertBefore(s,t.childNodes[0]),t.insertBefore(n,s),t.style.top="11.5px"}})}})}})},this.shareaholicPlugin=function(){var t=s.querySelectorAll(".shareaholic-share-button"),i=this;[].forEach.call(t,function(s){var a=s.parentElement;if("twitter"==s.getAttribute("data-service")&&!s.classList.contains("has-shares")&&!s.classList.contains(i.doneClass)){s.classList.add(i.doneClass);i.request(function(t){var e=JSON.parse(t).count;if(!isNaN(e)){var n=s.querySelectorAll(".shareaholic-share-button-counter");[].forEach.call(n,function(t){t.childNodes[0].nodeValue=e,t.title=i.title,t.style.display="block;",s.classList.add("has-shares")}),setTimeout(function(){var t=a.querySelectorAll(".shareaholic-share-button-counter"),e=0;[].forEach.call(t,function(t){t.childNodes.length&&(e+=parseInt(t.childNodes[0].nodeValue))});var n=a.querySelectorAll(".shareaholic-total-share-count");n.length&&n[0].childNodes.length&&(n[0].childNodes[0].nodeValue=e)},2e3)}})}})},this.jetpackPlugin=function(){for(var r=this,t=s.querySelectorAll(".sharedaddy"),e=0;e<t.length;e++){var n=t[e];if(!n.classList.contains(r.doneClass)){n.classList.add(r.doneClass);var l=s.querySelectorAll("a.share-twitter span");r.request(function(t){var e=JSON.parse(t).count;if(!isNaN(e))for(var n=0;n<l.length;n++){var s=l[n],a=u.createElement("span"),i=u.createTextNode(e);a.appendChild(i),a.className="share-count",a.title=r.title,s.appendChild(a)}})}}},this.twitterOfficialButton=function(){var i=this;r.twttr&&r.twttr.ready(function(t){t.events.bind("rendered",function(t){var e,s=t.target;if(-1!==s.className.indexOf("twitter-share-button")){(e=s.getAttribute("data-url"))||(e=i.url);var a=new XMLHttpRequest;if(!a)return!1;a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var t=JSON.parse(a.responseText).count,e=u.createElement("div"),n=s.nextElementSibling&&s.nextElementSibling.getAttribute("data-count-position");isNaN(t)&&(t=0),n?(s.nextElementSibling.getAttribute("style")&&(e.style.cssText=s.nextElementSibling.style.cssText),s.nextElementSibling.remove()):n="right",e.className=(0<t?"":"twttr-share-no-counts ")+"twttr-share-counts twttr-share-counts-position-"+n,e.innerHTML=1e3<t?t/1e3+"K":t,e.style.height=e.style.height||s.style.height,e.style.lineHeight=e.style.height,e.style.fontSize=e.style.fontSize||parseInt(s.style.height,10)/2+1+"px",e.title=i.title,"top"==n&&(e.style.width=e.style.width||s.style.width,e.style.top=e.style.top||"-"+(parseInt(s.style.height,10)+7)+"px",e.style.left=e.style.left||s.style.width),"right"==n?s.parentNode.insertBefore(e,s.nextSibling):s.parentNode.insertBefore(e,s)}};var n=i.countUrl+e;a.open("GET",n,!0),a.send()}})})},this.extractNumber=function(t){var e=t;if(!e)return NaN;if("string"==typeof t&&(t=t.trim()),t.endsWith("k")||t.endsWith("K")){var n=t.length;t=t.substr(0,n-1),e=1e3*parseInt(t)}return parseInt(e)},this.formatNumber=function(t){var e=t;return 1e3<t&&(e=Math.round(t/100)/10+"k"),e},this.init=function(){var t=this;setInterval(function(){t.shareaholicPlugin()},t.delay+150),setInterval(function(){t.sumomePlugin()},t.delay+200),setInterval(function(){t.jetpackPlugin()},t.delay+250),this.twitterOfficialButton()}};initTwitCount=function(){var t,e,n,s,a,i=u.createElement("link");i.rel="stylesheet",i.type="text/css",i.href="//static1.twitcount.com/css/twitcount.css",i.media="all",u.getElementsByTagName("head")[0].appendChild(i),r.twttr=r.twttr||(e="twitter-wjs",s=(t=u).getElementsByTagName("script")[0],a=r.twttr||{},t.getElementById(e)||((n=t.createElement("script")).id=e,n.src="//platform.twitter.com/widgets.js",s.parentNode.insertBefore(n,s)),a._e=[],a.ready=function(t){a._e.push(t)},a),new l(r.count_url,u).init()},"loading"===u.readyState||"-1"!=navigator.userAgent.toLowerCase().indexOf("msie")?u.addEventListener?u.addEventListener("DOMContentLoaded",initTwitCount,!1):u.attachEvent("onreadystatechange",function(){"complete"===u.readyState&&initTwitCount()}):initTwitCount()}(window,document);